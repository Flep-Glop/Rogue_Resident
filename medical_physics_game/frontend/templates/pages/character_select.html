{% extends "base.html" %}

{% block title %}Character Selection{% endblock %}

{% block additional_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/character_image_styles.css') }}">
{% endblock %}

{% block content %}
<div class="pixel-container" data-screen="character-select">
    <!-- Animated star background -->
    <div class="star-bg" id="star-bg"></div>
    
    <div class="selection-content">
        <h1 class="game-title">CHARACTER SELECTION</h1>
        <p class="subtitle">Choose your character to begin the game</p>
        
        <div class="character-carousel">
            <div class="character-cards-wrapper">
                <div class="character-cards" id="character-cards">
                    <!-- Characters will be dynamically inserted here -->
                </div>
            </div>
            
            <button class="carousel-button prev-button" id="prev-button">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="carousel-button next-button" id="next-button">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        
        <!-- Carousel indicators -->
        <div class="carousel-indicators" id="carousel-indicators">
            <!-- Dots will be dynamically inserted here -->
        </div>
        
        <div class="button-container">
            <button class="action-button select-button" id="select-button">
                <span class="button-text">Select Character</span>
            </button>
            <a href="{{ url_for('character_create') }}" class="action-button create-button">
                <span class="button-text">Create New Character</span>
            </a>
            <a href="{{ url_for('index') }}" class="action-button back-button">
                <span class="button-text">Back to Menu</span>
            </a>
        </div>
    </div>
    
    <!-- Delete confirmation modal -->
    <div id="delete-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>Delete Character</h3>
            <p>Are you sure you want to delete this character? This action cannot be undone.</p>
            <div class="modal-buttons">
                <button id="confirm-delete" class="action-button">Delete</button>
                <button id="cancel-delete" class="action-button">Cancel</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block additional_js %}
<script src="{{ url_for('static', filename='js/character_assets.js') }}"></script>
<script src="{{ url_for('static', filename='js/character_select.js') }}"></script>
<script>
    // Generate star background
    document.addEventListener('DOMContentLoaded', function() {
        const starBg = document.getElementById('star-bg');
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = `${Math.random() * 100}%`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.animationDelay = `${Math.random() * 4}s`;
            star.style.width = `${1 + Math.random() * 2}px`;
            star.style.height = star.style.width;
            starBg.appendChild(star);
        }
    });
</script>
{% endblock %}