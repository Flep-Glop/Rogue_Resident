{% extends "base.html" %}

{% block title %}Medical Physics Game{% endblock %}

{% block additional_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
<style>
    .game-container {
        padding: 20px;
        text-align: center;
    }
    
    .character-info {
        margin: 20px auto;
        padding: 20px;
        max-width: 600px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .character-image {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        margin: 0 auto 15px;
        overflow: hidden;
    }
    
    .character-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    
    .stats-container {
        display: flex;
        justify-content: space-around;
        margin: 20px 0;
    }
    
    .stat {
        text-align: center;
    }
    
    .stat-value {
        font-size: 1.5em;
        font-weight: bold;
        color: #4a90e2;
    }
</style>
{% endblock %}

{% block content %}
<div class="game-container">
    <h1>Medical Physics Game</h1>
    
    <div class="character-info" id="character-info">
        <h2>Loading character data...</h2>
    </div>
    
    <div class="game-actions">
        <button class="btn" onclick="window.location.href='{{ url_for('index') }}'">Return to Home</button>
    </div>
</div>
{% endblock %}

{% block additional_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const characterInfo = document.getElementById('character-info');
        
        // Try to load the selected character
        const savedCharacter = localStorage.getItem('selectedCharacter');
        
        if (savedCharacter) {
            try {
                const character = JSON.parse(savedCharacter);
                
                characterInfo.innerHTML = `
                    <div class="character-image">
                        <img src="${character.image}" alt="${character.name}">
                    </div>
                    <h2>${character.name}</h2>
                    <p>${character.description}</p>
                    
                    <div class="stats-container">
                        ${Object.entries(character.stats).map(([stat, value]) => `
                            <div class="stat">
                                <div class="stat-name">${stat.charAt(0).toUpperCase() + stat.slice(1)}</div>
                                <div class="stat-value">${value}</div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="abilities">
                        <strong>Abilities:</strong>
                        ${character.abilities.join(', ')}
                    </div>
                `;
            } catch (error) {
                console.error('Error parsing character data:', error);
                characterInfo.innerHTML = '<p>Error loading character data. Please return to the character selection screen.</p>';
            }
        } else {
            characterInfo.innerHTML = '<p>No character selected. Please return to the character selection screen.</p>';
        }
    });
</script>
{% endblock %}
